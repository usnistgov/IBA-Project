function [Y,Xf,Af] = ahu1FanPower_2023_07_06_v6(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
% 100 nodes, LM 
% Auto-generated by MATLAB, 10-Jul-2023 09:30:45.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   X = [Psp1, F1, F5, F7, Tz1act-Tz1sp, Tz2act-Tz2sp];
%   Each X{1,ts} = Qx6 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx1 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [398.5;0;0;0;-12.4896;-12.2629];
x1_step1.gain = [0.00334728033472803;0.00263157894736842;0.00218151526850717;0.00235331452289813;0.124584200231727;0.1277481827821];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.045562246256310792725;4.8632348733960020226;-7.7632796456601607105;5.0957717715004546832;3.7171876494268460966;5.7037117841214453051;-4.94535865566028221;-5.0568510755685700531;-3.6467386953494762558;-1.0103404829666213782;-5.0512382084809628324;4.8366552159788174237;3.1853159782804296718;4.7936731255806730445;-3.2691992744084905631;5.4223516479261393286;-0.15910598364031675045;-2.9652361492077714544;-3.9968621034177247431;2.6279171312235765079;-0.77187860439524402789;1.9316517576062739447;3.2889719990489041379;-0.1644334879985692166;3.2039182324556620962;-2.3609802029422151115;2.6270560955929633806;-1.4824952491200866778;-0.14701245582041330695;3.2790702476533573062;-0.17956634772475857376;-2.2261197051174206329;0.015054667422390782816;-1.1840044379600251911;1.4613687401514996456;6.5492125233334990142;2.4206731711233770987;-0.96546536172140429155;-0.18074542473239524343;-0.4831289035547110533;-3.7833922259271153266;2.3988845943033916264;-0.038502061510204119155;0.45526618275035146688;-4.5691199804823812158;2.8065965652033977307;-1.423453190580528549;-3.7254093194435728975;-0.29564357293771920121;-1.1395597558901164881;1.5898675969180178225;3.5260529681408825375;1.6960637541208003487;-3.8216109090464218667;0.96190660553061479998;-0.85788519656718165152;0.9137975852183328751;0.42168468193385982845;-4.8804606524830207448;-2.4678032017030444578;-1.4961250948451600973;0.9920516529206151457;-3.6065226862985300116;-4.2535498652382237594;-4.8850112331754589334;-3.7631871648970141031;-0.24109146936705058706;0.18310720386463663623;-2.7971315849156388467;-3.450092096165016553;-0.67344979568230733946;0.36509326415434112389;-2.3383575189033845021;0.29040638389237538597;-3.9279048935956000221;-0.98409798046431606888;4.3599963150180940374;-0.83042653164411117661;-1.0522214262233509086;4.8781446567195692054;3.8803321026891000045;1.7089587840950042352;-1.2874748944565563846;-4.0556871195311154921;-0.13988909151251463503;2.8641739671799490985;-1.4740176323410465464;-3.7855221179806748388;3.2042774546321211027;2.7095414059394729023;3.1800961119043322789;-6.3952597798408641339;-3.990432314480298448;0.57481147082492867195;-5.8693985998477424815;-3.0348798612877687653;0.26368187297132811286;2.0902877850300844997;0.39918483052841979841;-7.141533295390912528];
IW1_1 = [-0.041980561973234346851 0.45899050159615728539 -1.6203366515081925048 0.5851261700103468355 2.2272328751729633112 -0.60986343864904724033;0.16844221850206475555 -5.1097539333340931123 -6.6478500030123646169 4.1358645132616009832 2.3422383173944871793 1.4172992257915635328;1.7061368775342620197 0.44259014053682310674 2.3269679455890042163 3.4472569980501748255 5.0588065689181460627 2.4710950970748641886;0.32846775450602411217 0.0019455204758911798235 -1.1359778338123414088 -0.23529662061061074052 0.29386873551643488689 -6.2691677743089968544;1.4078424646970921774 1.6538444284189579569 5.8993374380378282851 -1.4806372307929105414 1.2313931080705931009 2.3642064222009699925;-0.39627170411517909088 1.3705128764911007622 -2.9401734151770160253 4.4824940655351097618 1.8531342268646415761 2.8510278346584985165;0.80730941935252409358 -0.18357485701574896564 -1.0274146455867778638 1.6559043488872811078 -1.5578586901854376556 -1.1063771644822535389;3.5724611250515443395 3.9134234609304048291 -1.5564354776178253026 0.91688302433333490615 3.0940124320014938952 3.0003915127927451856;2.2280655925284125196 -2.8601033650228733229 -0.21643998933526981121 0.47800851220729489999 4.9517851037077766918 4.5049434682784497141;-2.2866079117556812328 7.2580681787510838987 -0.78743398242916284868 -0.97214376041132388728 -0.63292638663188360848 -5.3711875991001907238;2.463828653510583333 2.2779426537997440327 -3.4255826168029663847 -5.87797931029335885 -3.4981228259093271049 -2.4508035751067325236;-1.2783832568212292191 -3.0790623397990599663 -3.4765545219649762743 3.0943962965491165207 -3.2790973297181240653 1.3120689601490116427;-3.8027220805135040216 2.1688008875122064545 -1.1640399954237989899 -1.2850522287607213379 -0.83197862153544632768 1.2608659869704696987;-1.127978780710207074 2.2067748619107456776 1.9051917387440371332 0.93240092033401644755 -0.16501379201566335198 -3.126019620933490728;-1.5147824357492469804 9.5192780048061926834 -1.9824631049713079545 0.94697254345246484331 -0.15481725265815346471 -2.9889843350728879656;1.3148818190101423387 -3.0284947785795117703 2.0655247352361580937 4.9877130554755417791 0.29088595351532919864 -3.9751215998735003332;-0.020243630978509796065 0.40572164562736157123 -4.2816235125850958809 4.8812610673060303768 -4.3702355302546793681 1.3934623674555828288;3.0554087258516906545 -2.4346456042414961196 -0.71684549159413701869 -0.47668570617327016281 3.3820077298481878714 -3.1918008649611127048;1.0462923966900727901 -0.3586417857216995797 2.4686736386622176731 1.9221389624384863648 2.8384211142363913183 2.8074288836312075723;-3.2945089793413453449 2.5616702985068160459 4.5380864499905104736 -1.1790747673502284254 -5.3120275273406543093 -1.3015248143288844496;-1.7113437179271069333 -1.4019431440819463131 -1.6580333908861613068 3.677204506872945089 -1.8149181328304719862 -1.3828441295966313884;-3.3363750010934545287 -0.14003004137258798223 1.4707543205945035059 1.8046849212622586567 -0.16338119881381296672 2.9826856807046180364;-3.2282219287839226673 0.026940605395161770774 2.8463601131303062353 -1.1433402867402688852 -0.48549391003644887244 3.0031708018901999147;1.974442222962660809 0.35353539587836269042 -0.031123575558558158605 -1.4600023049724955015 -1.135984170991494846 -0.052033252367425376905;0.73037109306748171367 -0.76012949745951796654 0.36819375218331390487 -1.6468118940542895157 -1.2409512259025925474 -5.064152743530052625;-0.07694379418882203725 0.0081797260214370483278 -2.7861631918475735503 -6.0867681953132848349 -0.40049466646661802116 -2.3041927687950289894;-5.2753736637301571477 1.7818742529420725784 -0.50366057943410469377 1.3237385195761732781 0.98161191236872569199 0.084270952868259987878;-4.1463590161482555274 1.7924498020377990226 -2.7541520481947516785 -7.3691241208630371418 1.6575878374302008833 -5.3275430443838462935;-0.83599526910765298293 -0.29841490176959678537 -0.1699646341522588755 5.1372547588383135064 2.5153284912497539949 0.12020602078371625532;5.9408781622660100652 -3.2727970518640492337 2.4412643536173015413 5.1853075579847063281 1.2666148697301524706 1.0182123971092689185;2.4074431272174647845 3.9161681912674493056 2.8161257007065776392 -2.4077827241206342102 -3.530764313153541778 2.1497364729385677329;4.5360820573487927732 5.8032115719657353381 1.3414378135191575847 1.4453938132487571533 -1.092237217342455935 2.1557468809305704305;0.6375573817572532942 -4.2914634123122219478 0.63768337656031504057 -3.4240964829660458513 -4.3205321090583410637 -0.050730161356077108081;-2.7449104060770443958 1.0374958453517080237 0.9925786702987815513 0.38094376913168981336 -1.6648770587522034869 -0.50878896400669670896;-0.84585186249379951118 3.320538693896517568 0.94635540931637462947 -1.360820233654749245 -2.3303962748694222462 2.2717697271985550778;4.133385187960410434 1.7995009290556376325 1.7771960860164606189 0.5621707635929471536 -1.8793886974788343025 -6.5169037095183481867;3.4558826865644527437 2.4090347265538607502 -0.63435420614712711984 4.5659897791794250566 1.2596240554013267143 -1.0174970269070291451;-3.915131917140721729 -1.0650474326443375439 4.2079324331282927929 -2.0208787574378002105 2.9057836000888963568 5.6576685279865452927;-0.019649055201910632651 2.5224693568989207115 3.8361087898539403263 -0.27930100972865223863 -4.4375766464175088188 -0.7074344163789830775;0.52983819037921153772 -0.68585540189934079969 -0.43393499566155135927 3.2664671821835815635 -2.2028119175134612817 -1.2353029654026770334;-6.3031192481335258648 0.62157521863305231768 0.45672043595209627087 1.1041839880175552402 4.6484113611544195521 -4.7130423613217251599;-1.5793483879611129872 -1.7599784246121137343 7.677766599470970732 3.3885993423226539178 -2.7905604411731292913 2.6654189407539345957;2.6754718299991364638 1.3925995785521565473 5.6936251506991091276 0.66689227205512413565 1.2682863974853499922 -5.3774609492753402407;-2.0739799050874787589 -1.7594176953732310054 4.9346871758591150936 1.9155599042754813954 -2.8026033500827689515 4.8013266002527972276;7.391217677685056664 1.211593929487023491 1.9270880438994024697 -6.2272551796196369267 -2.8130688623733099973 -1.9940635762193050784;0.30514786211726346865 2.8546483481873186072 0.38350995558544670461 -0.20021471465391837974 4.4843629140118759224 -2.7165570264233434017;-2.7198392865711804589 -4.3327850390156577021 1.2255331096301054217 0.94774088236841114163 1.1600115745800048117 1.327241192479652776;-5.0999010288823543036 0.99067084434634367085 8.6322846498638359236 -7.0447718041885805107 -0.85337509450146864509 -4.5869768657032450321;1.9055741784339907952 2.9833855023259840955 -4.5154594334297550873 5.5225663632881243359 5.1905418237051552666 -1.0551739470801817511;-3.9323102219468979435 0.73980880759960931936 3.9779435756964680593 2.2519852795559898162 3.9188626469180949385 0.60451013571476619468;0.88392540386719453682 1.9786982703764359748 2.73282411493719124 -0.71025758042015163518 -3.6883252926542753336 -4.7641242434985242582;-1.5692045922915975886 2.8286479205558459071 -0.24761985543063302906 -1.0682813731593341355 -5.5856076640482763551 1.6065970384993855102;1.2994104892645010896 -5.8198321276312343642 1.2658095627761580815 -1.1663012616538637189 0.64001816954020041006 1.5867075609312837337;-0.9884884475343221899 1.0027821665218428215 3.7241000187670425525 -1.1324863716972350947 0.21953487250632214289 1.7003615147058583901;4.5386977339078464766 7.4156283308176806912 -5.9280092874757750465 -3.5802604417650889523 0.14640686211797648841 1.2899109894142668509;-2.7328220173463431131 -0.63770792790774988301 1.345060505549839025 -0.056528346177953339713 -3.510909488100751652 4.1435990681870746855;3.5437986566358796736 -2.8636774830805453718 6.1802248146436911114 0.028952325523598686219 3.7158151426751833135 0.51356001342552781708;0.61437710635190712072 -0.2638690551624370273 0.1160664800786725126 5.6694946506591339386 -5.5288369623532735986 3.6363428772070953698;3.0215993204851527842 0.050725931308871451131 -0.37298021230304673201 2.6592156241809181694 -4.5174984440505561167 1.7599183445034203288;-6.5607658801797761328 1.1021296292781956883 -3.6084405618228045931 1.8765855072155832595 -8.2795633386168976386 -2.4138056625090165142;1.7665438852310288986 -0.26798681289554071583 5.1240632872676004084 1.9076511583271726913 -0.22669169405595523958 -1.1890438975632806606;1.4751452827276063662 -3.4455923299003297089 -0.99216705716314845809 0.067295693480303175882 -1.8859761118530267154 -0.73496915470511403612;-4.0052982770977134663 -1.3744152815703261084 1.488381247597160284 4.246409638809019782 3.2054054487398224715 -0.34260282584622486768;-0.18696533027648790104 3.1078625597154192484 -1.2542720892388079523 4.7608195703270057564 2.7557790361106460075 1.7799757417140031901;-1.3217768593045751135 1.6185335341779860663 1.888317873271635694 -4.3645300630171313117 5.6152761648192877075 4.8334180244596947063;-1.1118653731654699612 0.12257840864380055435 0.36618089908283529832 1.0502706690637304554 -1.267079879806139564 5.5291321224012808244;-0.98065009689931559311 4.2367119651429465677 0.040601074266310266392 1.9365413786914291716 -1.216226496864049933 -2.9177721828058791331;1.9391967742172981914 2.1581375553113013588 1.2275049475726702575 -6.3944989031245098587 -6.038998518677932914 -1.8518761132978449613;3.7558700390367705246 -6.4562569553890210017 5.8664037990226267638 2.1880435378226157361 3.3552637800005093993 -1.0593559852119029951;-0.1525067110088155764 -1.2794932827200116154 -1.0657907115783527008 -4.5537733949966190394 3.0764017390961706511 1.32086969194438697;-0.8637914150960721571 0.26013532263106825537 3.2929401074301960506 -1.5030185254381591697 -0.43348586702224950473 1.0088477882067747871;-4.0284911049325762278 -1.6977795666091159976 8.085669874992749584 1.6385029606485079778 -1.6648733557636752334 1.4824079724063874419;-1.2367347233985699351 0.2373284667634492362 -1.6956686471518216397 -2.0102376737756806335 1.2589869091553007596 -2.186732767998103899;-0.31370909542338543119 -1.9533341694961792179 1.4634234071183023218 1.1417640320169597512 -2.9794776037415444669 3.5580799673739273992;-3.3081088993767227002 -0.43258790392756307774 1.0209826253703360166 2.3915314504100377846 -2.1821195645132953622 -0.94529289503821178897;-3.0604662975155587645 -1.4333562742445373761 0.075087802366913328211 -1.3309727743876706985 7.1729506182058271335 -2.3792862022385463661;2.254639538336847604 -0.70912305761021754424 -2.6783661829054108416 -1.8679529310157478861 -1.7521034188993263037 -4.0667713876282887142;-2.3582508687090011357 9.8759605504774263807 -2.0728420242902072523 1.8934411241977475715 -0.20972552723505552552 -5.5555037792138550756;1.481769277187794831 -4.8998854987250171078 3.8794984617587249254 4.6886915095911048112 5.2782846959709983636 0.083638403819806875217;3.6812910205058395618 -0.64387003511709517412 -1.6887799245743171372 1.3087263209157891097 -2.3157842853415888662 4.2516608870978798151;0.71106233413558472822 1.0080121695354382627 -1.577596165650689608 4.4481000342532022174 2.4750056686289685359 -6.0575772147753692565;-1.1436642891250161647 -0.1269712060620963312 1.2168186812455772383 -1.7215561913436470132 -2.0118755116426916274 -0.85903108743222689192;-2.3035035653400490752 2.055959437050271621 -0.22274627918125439185 -1.1231368758165656274 -1.991286780485432617 -1.6611854911609880148;-1.8545907266969148264 -0.52811049965520306948 4.0236958326812954923 -5.7265740287727533442 -4.1400129319327572119 5.8834520790537148116;0.36243492240586583364 -0.75065101233509001766 0.67005420207058896676 -1.6345302213743437836 -1.9626019569491819361 4.5065167375001129457;0.85299378088301480716 -0.6168196591634440562 -0.23144210686824573386 4.2476920596921985407 -0.28349808082110755647 -1.1427202646535072894;2.757149772157835077 1.7130351217206318815 -2.6817337787018415973 4.4608496141791142975 4.3189090743295803776 -2.8122853983009030721;1.2512999648772611394 1.9519463115342650106 -0.01511267122325238299 -0.14978482448067170774 -3.1573793010862738484 1.3363503685646132002;-0.58518210445332041747 2.3430451860532479635 -2.0426290721844599929 -1.8705040850544292219 0.061847964417036695173 0.44679880558882617558;0.14482865614878537297 -1.8172258963564602574 -3.2334717979054419246 -1.4213893117391378507 -1.2608735905348300577 3.2480324942100957664;-1.3035841179415927904 -1.9855862483943278463 3.0173017028498301251 0.12295253278653982265 2.7988500851282447357 -0.94105565310577410365;-5.8854216627485396174 -3.5693354335367106778 5.4804968635633599661 -3.2725235532052781018 -0.28912042780884039672 3.6066870705027866961;0.49182617066237338532 1.1587038944429237652 -7.8351912467455573363 -7.5627584038441471037 -2.8907613030438086277 2.1701410733780881479;4.9893072475688766687 -0.96360002409530198797 1.5477782840132521258 -2.3470512406173478226 4.5625760111541682207 3.33173606907952502;-0.60091408725518469236 1.5820745363967103625 3.7665316752018105362 2.0603552067579191664 4.1382275801435524087 -1.8085027069089496532;-3.4226720631938420958 3.6467317179639033853 -0.83443034983822317319 -0.47682795311297909713 1.0747077746427244893 3.8712709605900861298;-4.740720291900736072 3.6115303673297383114 -2.1465287535574431033 3.5176006463991047468 -0.42289109534773239307 -1.5715581661732813679;0.52738020764611270863 1.1775938479173779783 1.8078042748736535827 -0.77143113587070877291 -1.811482363166493359 0.94911157733795659119;-0.86148115833704175248 3.5409758684290779662 0.95572958772349370093 1.0996819196600313706 0.22141411450115017212 4.5332130421930827424;1.7130946520485410556 1.4608039413192615008 3.8900525720972387589 3.9286012020698160008 -1.4127765993608036865 0.76632691522706941623];

% Layer 2
b2 = -1.104805557231417934;
LW2_1 = [-0.46720429114467348919 0.078977669610167930414 0.11725255184992039448 -0.56794328588125164714 -0.28845193613114539222 0.42129915050464389337 0.94252458550360229683 0.11330561629827053116 0.12234779346414302592 0.24546959679727195502 -0.1168463494000871461 0.10345013374076293677 0.65927639770324009127 0.81698871469162648307 -1.06612590334275259 0.19164709680430744299 -0.16516022732811969087 -1.3551007575875799738 0.21669319593175495609 -0.064180446629219789489 -0.090930057260887278692 0.57522096728900706797 -0.31685379557084419888 0.39200584306256158751 -0.1594739000380203664 0.24024950609725520545 -0.53433098768022158076 -0.15784404454255021588 -0.20649151192870468519 -0.13198087194932422994 -0.24654877518447243512 0.22120848372310181196 -0.31211962324125419599 0.56948406989449196214 0.53105344847935143093 0.09258620237502417083 0.11753998074282817621 0.14963283562614870803 0.18239451945563206481 0.25202041362989013873 -0.16403272348566666494 0.17102467913563657032 -0.12285850034697157196 -0.15916916934076569268 0.13960797129998786525 -0.31598755306793863129 -0.19563464929463639241 -0.089517814087397257206 0.077745661595127593668 0.13091896904061908757 -0.094885179085508530861 -0.36012528731397569493 -1.6460041419075037705 -0.40411579845069406369 -0.13506835656879548346 0.19512664134737117694 0.085843157411464601769 -0.094839827716791016976 0.35669261611659891509 -0.10535633015487509689 0.19057862427029381713 0.63799592498275592423 -0.073198783169801551196 0.25585458374632785716 0.037239615603086410889 -0.63750561088796231513 -0.26038412026113327835 -0.14213528059669211512 0.13663288295459768973 -0.12337936695252442465 -0.45375099217119196915 0.094599823106588723509 -0.79884439460815515055 -0.31278579720961635635 -0.50444780451249227049 -0.074706347224558808384 -0.27884743943341588901 -0.46872486899973969665 0.13879021277242620247 -0.57063252049359869389 0.22639822081679394916 1.2032231354852795935 -0.48259953969005670027 0.12758663350918297841 -0.34697245721805197727 -0.50437140260741319953 0.36236093373628208703 0.81989990404305523874 0.0015818767996669674814 0.31958634608913921715 1.4071586682836119131 0.14619225663445026275 0.090791937947785839036 0.021694032860763854537 0.27679469750949742268 0.15826288803406154959 -0.01402416763713045314 -0.90690208443407360761 0.2401010288642889956 0.15271700152460015998];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00136613888167871;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
