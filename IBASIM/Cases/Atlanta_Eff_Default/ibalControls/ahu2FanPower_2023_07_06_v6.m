function [Y,Xf,Af] = ahu2FanPower_2023_07_06_v6(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
% 100 nodes, LM 
% Auto-generated by MATLAB, 10-Jul-2023 09:33:51.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   X = [Psp1, F1, F5, F7, Tz1act-Tz1sp, Tz2act-Tz2sp];
%   Each X{1,ts} = Qx6 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx1 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [98.5;0;0;0;-11.8596;-7.5267];
x1_step1.gain = [0.00333333333333333;0.00333333333333333;0.00234814529689098;0.00189021231053693;0.130248187922086;0.183700274631911];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.2156767918886379753;2.9277092113545588603;2.6480496571350689017;-2.3116865897583620537;3.2017862823587917021;-2.5999664710018972613;-2.7828134661275218953;3.3224915284606750809;2.3584942347622166459;1.734474106519766412;2.7510218374352581883;3.1261919016889416767;2.5822025101237748856;3.1939413660417477203;-2.7946237251798424772;1.354053007777054729;1.7912311703285761499;-1.1522167562733058865;-1.984944987915190806;-1.6464857172382907358;1.7468420470339682815;-1.3695974555157668373;1.6917672206313041361;2.6074798287791502993;0.31180764499222335395;-1.9194721379940886674;1.5574772424823597472;1.2209950315312116942;0.78482391468586831795;0.17284681456039435732;-2.6324006972715294772;0.75355532209366715701;-0.23398714580247109707;-0.89303786510018923206;1.0083147085974970558;-1.34944104028860834;0.94544699000596477134;-1.4267230219986755113;1.893513446604190742;0.4663747536716931763;0.63314578405370336434;1.0526002570753825172;-0.44156530049141390348;1.1000594109283816646;-0.58585667476045311108;0.69657053901446452926;0.094825047657025249292;1.1145928836241552062;-0.38054976035648102606;0.21178071566716141771;-1.2506603429625213764;0.20524633126464666977;0.97179455109742918228;0.051585703201094144921;-0.97396278678522019145;-0.30252218814944048519;-0.33966139703244863091;0.8860202287506694363;-0.037453608540902280644;-0.15133851939447892643;0.43856181064707361328;0.96989326018896115933;-0.4775858823069671355;-0.39686904968335079413;-1.1598152749069066125;-0.59851972559423549658;-0.79364494932417428696;-0.81992158565350259369;2.5310320432861268536;-0.61532178876767973374;0.76508497775159256538;-1.0005102273038584126;1.5600209169391610065;-1.0910086304081283437;1.3045123874380422091;2.2649385836552600182;-1.2997017377639499269;1.2862935809938764731;-1.4416136034883346717;-1.0889557400546070465;-2.1700260192195228726;-2.2636714924019658568;-1.7757665359873966437;2.6249053902982071307;-1.552903891207682241;-2.4323009750938626716;-2.1341953706211538311;-2.0043553900131971801;-3.5382853059818986097;2.7206142391156169502;2.5190768168209420885;-1.6817859827337380274;2.4790283277948788054;-3.1171223708839108646;2.840242226341288756;2.6857984728319896917;-3.0343323103700106103;-2.9680258687216496405;2.7896719019600895173;2.9965878013654263512];
IW1_1 = [-0.71658356505996212427 -0.23289661927436092204 2.1009450156017099864 1.3789142049258027445 1.3226410227558738075 0.74455204266580787831;-1.4976221189315965798 0.79788708619218340345 -0.97154619794062002658 0.13722375152093502226 1.1990862108779096751 1.4791739754566448628;-1.163340984037316117 0.0085747984531614942355 -1.0194479601874852914 -1.7172364842781551175 1.430633417514656669 -3.1251653407104824645;-1.1449096101507068024 1.5802200080363550949 -1.5128506420573604174 -1.3210676722222036705 -1.4937046539943776846 0.58694395745947869347;-1.0176739384781967601 0.83310223987348952512 -1.7306589834595340616 -1.6925136370925948359 0.084824762705352260705 1.4095840690080279067;1.5058705026753356204 -2.4479872247924019391 0.51439467345834322121 -0.36604518610746072937 0.23817236685646911432 -1.3714229772375976513;0.051671825555699359145 0.61945297277551436554 -1.7761744823799263671 2.3856296853049703266 0.80545531781554280393 3.3780891783521429517;-3.2648045839669070922 -0.38712287654652921542 -0.10381767671244214457 -1.0032112681275262567 0.61281603782002824765 0.62171121367271675595;0.42609053152151471489 1.491019065400311483 -2.6380598995527120287 -0.86555818428948039234 -1.2869152339055847101 0.03793054415967608145;-1.2128291927901340141 -1.7041760166525370401 0.5740171115611080177 1.5009037075608142597 -2.3831162211819174601 0.99003162584152037962;-2.8736623356824204656 0.41144762772546644714 -0.31829369852875294411 0.91011359975896166663 -1.4487670129340346481 0.27740671607396333309;-0.39568859361315100731 0.60041485749469303279 0.83030107501828520622 -1.0717834683220084369 -1.0823367620531463285 -3.1389495736316490593;-0.92326552574607623214 -1.2286739388214666935 1.8252176924935612501 0.06252000929611627178 2.1082307498583432448 1.0202069056010394377;-1.5306428760009938017 1.4117328863489724267 0.15492478956887337227 1.5482871128023039109 1.5334947235965010748 -0.59569805244153373192;2.3537381183974979137 -0.14078142858807701776 0.076655960721823540593 -1.541122870032314518 1.1418902509866508677 -0.48963568904639015456;-1.0312402268218148205 -3.1955310631678730537 0.79434048267027490553 -0.82562312474053578537 -0.9280588885059511961 2.5133897520776256052;-0.69420843751997840521 -0.88297503590411818841 -1.2350878603244233034 1.0121013488583938678 1.0638369048221303359 -1.4616430700375104834;2.8213241063555392074 -0.15241786241872520846 -0.30395757956505964348 1.2531572195271094561 0.74262760216889489584 -0.94415954209731978164;1.1538802321076144786 -1.539325109668473246 1.132934083169339301 -0.71817143525456728081 -1.7260895662731714495 0.46080671143328416628;0.26229877741547169556 -0.4894610862508146365 -0.16218357341492833923 -0.84019856226354772133 1.1571362940571809919 1.1988661362164245716;-0.8166088659727457344 -0.65522094682287446155 -2.1599194958127108102 0.56073670852636781081 0.98612047163470917255 1.2181389993558013884;1.1109715975362108864 0.93713971521608063764 -0.01973025191571479986 -2.1741796379009534768 0.93006909760767986217 0.50310490467460511343;0.51581988767449449274 -2.2059254109406372102 1.7499444280975182675 -0.94230395875924632954 -0.94914941482864556566 2.3695468846325331569;-1.1915311439572071617 1.9824920425274554781 -2.3663357445871389118 -0.11094472010211445245 0.16869091480294884366 0.71938208282796245463;0.061954674443370695569 0.061924002175455621078 -1.1870122048861029285 -1.2346078899441190746 0.60747821431960791205 0.52005722990804381656;0.0073345053457475190006 -1.5829988507429717526 -1.4718837269381961352 1.247307882091531539 1.1127416712819688804 -1.3093498675842241141;-1.5985450508775618239 0.56999350013311966823 2.0805889152751388949 1.6658991000228322577 -1.32522101865564923 1.9078917176135121725;-0.58123938553717080513 1.5975111405121922292 0.03250106372392093379 -0.044337594997010655595 1.894693866317352926 1.4040586762354834161;0.2292194305438028934 0.80971661494499191924 2.0873070545294978295 2.1389079493455112058 -2.2649486365984730085 -0.88118703051322511133;-2.4605438268385122491 0.81305680353775089397 -1.2514330734636405218 1.4385120384353131673 -0.55350765562676385034 -0.94211369132499966916;1.0922895083748833667 1.7748647120968263913 -0.46940395094614550953 1.3203087128684176665 1.0266477590520401986 2.5114152334589183724;-0.21232021206774948086 -1.4779721703850225989 -0.68539585299139149654 -1.7761528450153847292 -0.083717896196229199535 -0.1263128094917562172;-0.65142021793124815776 -2.5285968980811812656 -0.3161941613402397544 1.6093994850916646389 1.0091725911572317909 1.1340552020825096502;0.58993088959793882342 -1.0327945262543769545 2.24137131689608049 -0.4961184221680201567 -1.3626411109036553615 1.35782835684554537;0.67350420742258332307 0.63125209682630434305 1.3994412682439449913 0.58327299366031304384 -1.7207402347222260364 -2.4876521006805756286;1.7180389363538985936 0.62754162949884484402 -1.8672576688489905816 0.87853682169377533828 -0.37677115077923023501 0.17159790664741447763;-0.93437807421758456439 -1.4552073147840234313 -0.91519031842068410132 0.95394622404646789438 -1.5799159257841695059 -0.87781230028481316285;1.4568806453298446257 1.4454852632379331379 1.3132130130961492398 -2.254436356275199671 0.9686263549284067631 2.6705862444415995327;-1.5737029195118756864 -0.42882781093066874023 -1.2979736868713969145 -1.805831424158720333 1.9873173512304258548 1.8267779631069038793;-2.626242231246190606 -1.0650198451109482711 -0.82935769758648458794 1.0807099593901134948 0.73810684975171358957 0.22953294970751175752;-0.2923810889346195041 -2.243063960481246788 0.28358785259318625149 -1.4137815109970077732 -1.3447995916219335211 2.4612193703219800156;-1.1489600683443843554 3.3717492844849443756 -1.2026275454881845128 -0.80331362313089704763 1.4074478840670086033 -0.67861320158661886381;0.4462725395832018993 0.12312414720230489829 1.1203749492549877065 1.8771555654532807722 2.1635623422003789074 -1.1944097068376668958;-1.0672361483753796119 -0.65509926530237228004 1.3088329110273866362 0.38418491862453807428 -1.0245904073438969473 -1.1755806104306156801;-1.7867360378635521734 1.1428870317554165048 -1.3266267247210721258 -0.62367796449077261833 0.26209052903888513386 1.3838794912729501796;0.33584902635124291859 0.33341205161526882295 -1.8814150043773263388 -0.90860328308139315379 1.2179342986685566252 -2.9867584125707344889;-1.6982864467736136227 -0.4957590249265033111 1.2563234035262071941 -1.9041537601643778732 0.4390766214787042987 -1.5596419520413973281;-2.2655736478081034413 2.4559711484738850906 -1.1929362173208113429 0.27782923314202107035 -1.0139588702564013012 -0.48729859832589361712;-0.98772090621858266157 -0.55040468295416222766 0.36715053771853467524 2.7211757681815860188 0.43866751644047230485 1.609996120733141467;0.35470121221334938166 2.4848458882845272377 -1.4195649246211632377 0.0054057112799851441201 1.4031469173029333941 1.6541789990996598192;1.3052840844332764814 -0.51034558301507781941 -0.34607800352544193512 -0.84289149326948464847 1.6333297555313259775 1.1963622873247172773;-0.45495025021531410037 -0.51770497425218187093 0.69009893241854114443 -1.6983451374760882846 -2.248760889760654802 -1.7312862984052095339;-0.64387152334293495937 -0.40201905011045035998 -1.8300408154452187937 0.73379327318851661488 -0.48824469788378188628 1.8058875944462686736;0.5809181317048169868 1.3532940660081727025 1.0760592828816537558 0.46773549801804487069 -0.09661699719792260499 -2.4837263495186929774;0.19214611884845847478 -2.4974297237596885246 0.26248831939171768379 1.1676828327482071668 -0.61787070907773200545 -0.92988815282465875356;1.9790001705382551656 1.9543796233288477371 -0.10437651512992868197 -1.1790193632645413757 -1.5244626016875473251 -0.53904114494185439987;-2.2561913831514415207 0.43409985556258440242 -0.85913606175230983197 -1.1605779870244918861 -1.4853611564751321161 -0.33533873152128090833;1.8458396636909919497 -2.2856374721276817574 -0.42829733058920399502 -1.1156470803548186321 -1.2629831558946831294 0.0088563048267090820065;-1.5476059565862789746 -1.6144750666175340381 -1.2251213080270144662 0.5597298229553908655 0.55434774358901239832 1.0801870642962365654;-0.21182310290159603317 -1.3984381465540098866 2.0961826512436356751 -0.99777051837657648736 0.84084350213210512504 0.78537532665562215239;1.2174352933189880321 -0.076160713883853620176 2.3389676089100661649 1.2085142196107792056 0.99057821417981595236 1.8581374176159852762;1.8613662409438658241 -1.7436370668600296163 0.83007577124412601499 -0.10831798384092830578 3.2535434126626427975 -0.055369555029782170641;-1.8504319943053906261 -1.200850333192326147 0.39991096009905569009 1.0651634908180191985 1.3137549565920740857 -0.2102121477622908019;-1.0452269430649623327 -2.3284176696227900649 1.5194241999970172774 -0.076758853754634093214 -1.2316172248041923343 2.0233712564226489228;-0.63551654761206377575 -1.2266917238731958051 0.64672987145819849086 -2.0187450296379791936 -0.98758771766957820226 -1.1362727243869075178;-1.0704201513214568475 0.65120320809127807404 0.20093395848885603483 2.0703047700579872981 0.41280279986546059012 -1.7082318017908735275;0.0070488671852257257094 0.02998300803325601796 -1.5840252968371195674 -1.8315459113149863413 -0.76014476651862827872 -0.6585193930128222517;-1.0833153346207522461 -1.0575128375867648423 0.15213086031347688998 -0.51091204906932352614 -3.1063794997312492718 0.49949108752067677974;1.3758559891798605168 -2.7300880760776369272 -0.20963383763852930231 -2.1775662589571580519 -2.6533175772301511586 -1.3086563255826895169;-0.97338852786783514048 0.70827483145062763992 0.70765725678956115097 0.17394206179004459423 2.4601375823892310812 -2.1233371499531474846;1.1394950398444052553 0.051196142058171668909 -0.1502582202290899116 2.1453725856133178951 0.39794940584681853801 -1.2656880335217159939;-0.84033121652122266809 1.0921469815526720915 0.27748011673082234596 -0.34074108230456945368 -1.0036270613340967373 1.5230617032608608774;-0.27583175318309449686 0.30007325625802822033 1.4169306207314451562 0.14886382704378120501 -1.3917059467408232631 0.58316560574706588493;0.1792085453412382845 1.5648114522637588397 -0.62164840530500142801 -0.25765030955687412417 -0.95672798079814258543 1.3671574497987726282;1.3795480018426544699 -0.23659293517457208322 1.9847180531603871856 0.13750743195605200087 -1.3849406643378157078 2.1563797414099985517;1.0729356618848007177 -1.5178277031464662006 0.51047705112837871155 -1.1974868251779693384 -1.9813007655774792504 0.42019795660572689666;-0.56429222755399921496 2.3823429574737504666 0.95640823285390519359 0.030946546710636957389 -0.38781566395380784318 0.86198464915650674367;0.13143878583850240882 -1.1467581113819806937 -0.41945853583377051832 -0.67619092149087467458 2.4372736541521882181 -0.15745517665491756687;-0.87302045159392582807 -1.4660596329338817512 -1.15975270837613742 -1.0008158351765652494 -1.1540956589714652658 -0.78715983504976183571;-0.44659795409367414321 2.5402164102911002352 -1.3311791803605874662 -1.0205539519971018603 -1.4426241097716436812 0.74629554061694425293;0.51344017055964041862 -1.4917945767850990801 0.88832499888636229368 1.0640900408559479384 -2.3770627122410052934 0.19327476543095517547;-0.83302469980626236978 -0.5382459974932248814 -0.38413029118469121936 -1.3428619039082476672 -0.88469383440283710929 -2.1453306438681916113;-0.3844930014651539163 1.4086963531299194763 -1.9610696881566522798 -0.50692421445452706674 -1.8142707693825170789 -0.39256808770313034174;1.1942927958626221585 0.59578190942881048553 -1.7504951927218821428 -0.80672679988936846218 1.1843886035635073917 -1.6673698883832430706;-1.8735792310979084707 -1.1376568755518219334 1.0825468432714764333 -0.46133281419968480419 0.29827379261234249208 1.7865449996978788327;-1.4840636574498462519 0.42773524298146498035 -0.45093175209349661836 1.6793302530057325761 -1.4982189246814590078 -0.78837145467314950764;-2.4294201473104792832 -1.3820558016006274649 -0.77405170926305089107 1.0812849602686376294 0.31720274467535636287 1.4325555074141171907;-1.9782410404755674804 -1.329352299245483815 1.0417005179505138823 -1.2865471612164327553 -0.69427981947498129678 -0.91016385683776890314;-2.1147805822372576223 0.27106120980155035127 1.988389749037752452 -0.4127104805327557191 0.25371751862177238657 1.6273378467776200562;0.84405950974696764 -0.95083877509402359163 1.0562147308013776215 -0.40042238109611633101 2.1789346386675401135 0.90754080848174079055;0.63567666785509013838 -1.7902086844269000654 0.074779744899106811995 2.9752394601554805753 0.79105590436308748092 -0.64015633753834599862;-0.47645023455603474627 1.009696828539234259 1.0290848140846633463 -2.1850580382679032354 1.3344092920681698278 -0.011686005480180026994;1.7707979241609677068 0.39868506784543367161 1.5847646068216709736 2.2349046649586394864 -1.1891899133792178667 0.845491810855773962;-0.056171275070997818413 -0.18767380947261069757 2.2358525002213420763 0.99708991487871934112 2.2172856160569418549 0.30101327686800488648;0.83244316152614172832 -1.062537510951421682 -2.3963054242035815022 -0.96929273558604800431 0.84404860501307654719 0.94689412104777048729;0.76118304552229465454 2.6345262777627063144 -0.65262103775808977257 0.13857721545085438519 0.87882496263109544099 0.81872027520838397407;-1.1584283757235867007 1.6774822554261721308 -0.62814335813949717657 3.0080845866914902587 0.70822478824961476729 -0.24019926990940992928;0.9926309915631427172 -1.0353295384295637671 1.2894620773968139549 -1.0764385083813654553 1.0501873624878295121 2.9879048127661458345;0.37264420088299055056 1.8625437815350054382 -1.0643381841214045735 0.5953506277889368814 0.65844427722261666958 2.3118225442062376729;1.4678776806183202464 -1.3917434045781467145 0.39115071179083882313 -0.72930442990044541673 1.0145184982994077671 1.7962549493672339551];

% Layer 2
b2 = -0.20582392609547511819;
LW2_1 = [-0.19152254567140963859 -0.24994455623703273894 0.37691927365382682513 0.4186607006229204897 -0.20830729630897718008 0.47345701353421837387 -0.073911133453733401932 0.72889049981744535867 0.52555626595552440428 -0.57618453869861741001 -1.0167399494833768703 -0.53089476651254607908 -0.79095446514148204376 -0.47597798758669229713 -1.090339735279147515 -0.73063416923668222935 -0.86083213253066581672 -0.21125250744101087275 -0.098516843312433252655 -0.3883326991391328753 -0.59375147494987534635 -0.7028844368408282417 -0.93176304141605703624 0.89369145984943998418 -2.368614433816234488 -0.2297074196922500311 -0.12661834580455488819 0.34868366024340152753 -0.368196864440015037 -0.18148017431398832944 -0.48120969260654988808 -1.2467407189049777294 -0.39604636938995957385 -0.40294178946566139299 0.48648478580428267115 -0.096718886458527428274 0.89858112319976990445 0.46741872036838055804 0.59123607033713854175 -0.42555555964955704695 1.0909040130142950709 0.72440680162909987239 0.22557593625305821794 -0.033829563441816347391 0.19621433675880811665 0.43985564439384455815 0.16063647674048203706 -0.28021019261154628266 0.19291305865811977927 0.14826544951235720582 0.45004807798426155196 -0.32428618087052202279 -0.40484224647587246926 -0.63991422824428945137 1.1297800777634579017 -0.36696748742343399119 0.29916343033206282964 0.27857525515146436268 0.36817746463046874261 -0.25695780820618452367 0.26177918198277760897 0.35187931061724397885 -0.077059562344151344426 -0.27949355293458300054 0.47742339571358105577 -0.71733464972157967576 0.33342599443442338947 0.43030848995132614521 -0.32081505776464736002 0.5355540115508319321 0.22590592043363252883 0.79607688891251515706 0.64965273805811207808 0.99204398388160586197 -0.4660996571186127313 0.8961173891413126702 -0.69697678385494377107 -0.40134593690037501101 0.02188040628376969679 -0.75564502445698134014 0.55171373857975547494 -0.57600190796629546774 -0.62073412962511942403 0.82613446587523708953 0.37739289406964993123 0.14664422503224200378 -0.21090305095089928455 -0.16619709395400888985 0.46232487390896315205 0.35204307989749955565 0.17956098591776015194 -0.066964011332401776611 0.24087343779776912434 0.37373147409712265121 0.70397416536819246158 0.18191478793736684527 0.69739567168320393264 0.39017229939023739815 1.0439424906221514977 0.44966636513148655618];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.00136637968138759;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
